# Ansys HFSS 自动化优化框架总结

本项目成功构建了一个统一、强大且高度灵活的Python脚本 (`adaptive_optimize.py`)，用于对Ansys HFSS中的参数化模型进行外部自动化优化。

该框架的核心是利用 `scikit-optimize` 库作为优化引擎，将Ansys HFSS作为一个“计算黑盒”，并通过 `ansys.aedt.core` (pyaedt) 库进行连接和控制。

## 核心成果与能力

1.  **统一的优化脚本**: 将原先的宽带优化和单点优化脚本成功合并为一个，通过 `OPTIMIZATION_MODE` 配置项即可轻松切换，大大提高了代码的可维护性。

2.  **自适应参数空间**: 实现了“代际”(Generational)优化策略。脚本会在每一代优化（一组迭代）结束后，分析当前最好的结果，并自动“收缩”和“聚焦”参数的搜索空间，从而显著提升收敛效率。

3.  **极高的健壮性**:
    *   **自适应单位处理**: 脚本能自动从HFSS的仿真结果中读取频率单位(GHz, MHz, Hz等)，并动态调整计算逻辑，彻底避免了因单位假设错误导致的bug。
    *   **锁文件自动清理**: 脚本在启动时会自动检查并删除旧的 `.aedt.lock` 文件，防止因意外崩溃导致的启动失败。

4.  **丰富的功能**:
    *   **可配置性**: 优化模式、目标S参数、宽带/单点频率、迭代次数等核心参数均可在脚本顶部的配置区轻松修改。
    *   **实时可视化**: 可通过 `ENABLE_VISUALIZATION` 开关启用或禁用 `matplotlib` 绘制的实时优化进程图。
    *   **结构化日志**: 自动将每一次仿真的详细结果（时间戳、迭代信息、成本、所有参数值）记录到 `optimization_log.csv` 文件中，便于追溯和分析。
